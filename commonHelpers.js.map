{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getPhotosByRequest(userRequest, currentPage) {\n  const API_KEY = '42307458-71f98d2a331f0bd294b8fc1ec';\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINTS = '/api/';\n  const url = BASE_URL + END_POINTS;\n\n  const params = {\n    key: API_KEY,\n    q: userRequest,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const response = await axios.get(url, { params });\n\n  return response.data;\n}","import SimpleLightbox from 'simplelightbox';\n\nlet lightBox;\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('.input-search'),\n  button: document.querySelector('.button'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  buttonLoader: document.querySelector('.btn-more'),\n};\n\nexport function photosTemplate(photos) {\n  return photos\n    .map(data => {\n      return `\n      <li class=\"gal-item\"><a href=\"${data.largeImageURL}\">\n            <img class=\"gal-image\" src=\"${data.webformatURL}\" alt=\"${data.tags}\"></a>\n            <div class=\"par-sect\">\n            <p> <span class=\"par-information\">Likes</span> <br/> ${data.likes}</p>\n            <p><span class=\"par-information\">Views</span> <br/> ${data.views}</p>\n            <p><span class=\"par-information\">Comments</span> <br/> ${data.comments}</p>\n            <p><span class=\"par-information\">Downloads</span> <br/> ${data.downloads}</p>\n            </div>\n            </li>\n      `;\n    })\n    .join('');\n}\n\nexport function renderPhotos(photos) {\n  const galleryMarkup = photosTemplate(photos);\n  refs.gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  if (typeof lightBox !== 'undefined') {\n    lightBox.refresh();\n  } else {\n    lightBox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotosByRequest } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-function';\nimport { refs } from './js/render-function';\n\n\nclass FormHandler {\n  constructor() {\n    this.userInput = '';\n    this.page = 1;\n    this.maxPage = undefined;\n  }\n\n  async onFormSubmit(e) {\n    e.preventDefault();\n    this.clearGallery();\n    this.page = 1;\n    this.userInput = refs.input.value.trim();\n\n    if (this.userInput === '') {\n      iziToast.error({\n        message: 'Please enter a search query.',\n        position: 'topRight',\n        transitionIn: 'fadeInLeft',\n      });\n      return;\n    }\n\n    refs.gallery.innerHTML = '';\n    this.showLoader();\n    this.hideLoadBtn();\n    try {\n      const data = await getPhotosByRequest(this.userInput, this.page);\n      this.maxPage = Math.ceil(data.totalHits / 15);\n      if (data.hits.length === 0) {\n        this.hideLoader();\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          transitionIn: 'fadeInLeft',\n        });\n      } else {\n        renderPhotos(data.hits);\n      }\n    } catch (err) {\n      iziToast.error({\n        message: err.message || 'An error occurred. Please try again later.',\n        position: 'topRight',\n        transitionIn: 'fadeInLeft',\n      });\n    }\n    this.hideLoader();\n    this.checkBtnVisibleStatus();\n    e.target.reset();\n  }\n\n  async onLoadMoreClick() {\n    this.page += 1;\n    this.showLoader();\n    try {\n      const data = await getPhotosByRequest(this.userInput, this.page);\n      this.hideLoader();\n      if (data.hits.length > 0) {\n        renderPhotos(data.hits);\n        const firstPhotoElement = refs.gallery.firstElementChild;\n        if (firstPhotoElement) {\n          const height = firstPhotoElement.getBoundingClientRect().height;\n          scrollBy({\n            behavior: 'smooth',\n            top: height * 2,\n          });\n        }\n      } else {\n        iziToast.show({\n          message: `We're sorry, but you've reached the end of search results.`,\n          position: 'topRight',\n          color: 'blue',\n          iconUrl: imgIcon,\n          transitionIn: 'fadeInLeft',\n        });\n      }\n    } catch (err) {\n      iziToast.error({\n        message: err.message || 'An error occurred. Please try again later.',\n        position: 'topRight',\n        transitionIn: 'fadeInLeft',\n      });\n    }\n    this.checkBtnVisibleStatus();\n  }\n\n  showLoadBtn() {\n    refs.buttonLoader.classList.remove('hidden');\n  }\n\n  hideLoadBtn() {\n    refs.buttonLoader.classList.add('hidden');\n  }\n\n  showLoader() {\n    refs.loader.style.display = 'block';\n  }\n\n  hideLoader() {\n    refs.loader.style.display = 'none';\n  }\n\n  clearGallery() {\n    refs.gallery.innerHTML = '';\n  }\n\n  checkBtnVisibleStatus() {\n    if (this.page >= this.maxPage) {\n      this.hideLoadBtn();\n      this.hideLoader();\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n        color: 'blue',\n        iconUrl: imgIcon,\n        transitionIn: 'fadeInLeft',\n      });\n    } else {\n      this.showLoadBtn();\n    }\n  }\n}\n\nconst formHandler = new FormHandler();\nrefs.form.addEventListener('submit', e => formHandler.onFormSubmit(e));\nrefs.buttonLoader.addEventListener('click', () =>\n  formHandler.onLoadMoreClick()\n);"],"names":["getPhotosByRequest","userRequest","currentPage","API_KEY","url","params","axios","lightBox","refs","photosTemplate","photos","data","renderPhotos","galleryMarkup","SimpleLightbox","FormHandler","iziToast","err","firstPhotoElement","height","formHandler","e"],"mappings":"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"}